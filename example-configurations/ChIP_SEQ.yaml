# This is the rnaseq-pipeline configuration file.
# 
destination_path: "data/test/out"

constants:
    - &genome /data/bioinf/Data/Indices/hg19/hg19.fa
    - &genome_index /data/bioinf/Data/Indices/hg19/hg19.fa.fai
    - &segemehl_genome_index /data/bioinf/Data/Indices/hg19/hg19.idx
    - &bowtie2_genome_index /data/bioinf/genomes/data/animalia/chordata/mammalia/rodentia/homo_sapiens/hg19/indices/hg19 


steps:
    fc1 (run_folder_source):
        path: data/test/IlluminaRunFolder/
        paired_end: yes

    # FASTQC: Generates a quality control reports of FASTQ files
    fastqc:
        _depends: fc1

    # Cutadapt: Removes adapter sequences from raw reads
#    cutadapt:
#        _depends: fc1
#        # adapter-R1: CAAGCAGAAGACGGCATACGAGAT
#        # adapter-R2: AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGTAGATCTCGGTGGTCGCCGTATCATT
#        adapter-type: 'g'
#        ## Reading adapters from FASTA file introduced with v1.5
#        adapter-file: './data/adapter_sequences/truseq_adapter_v1_v2_LT_ChIP_revcmp.fasta'
#        fix_qnames: false

#    count_fastq (count_raw_reads_crashing):
#        _depends: fc1   

#    fix_cutadapt:
#        _depends: cutadapt

    ## Map reads onto genome ##
#    segemehl:
#        _depends: fix_cutadapt
#        genome: *genome
#        index: *segemehl_genome_index

#    tophat2:
#        _depends: cutadapt
#        library_type: 'fr-unstranded'
#        index: *bowtie2_genome_index

#    count_tophat2 (count_mapped_reads):
#        _depends: tophat2

#        _depends: cutadapt
#        library_type: 'fr-unstranded'
#        index: *bowtie2_genome_index

#    count_tophat2 (count_mapped_reads):
#        _depends: tophat2

#    s2c:
#        _depends: segemehl

#    fix_s2c:
#        _depends: s2c

#    sam_to_bam:
#        _depends: fix_s2c
#        sort_by_name: no
#        genome: *genome

#    remove_duplicate_reads:
#        # depending on sam_to_bam saves us a sort step
#        _depends: sam_to_bam

tools:
    ##################
    # External Tools #
    ##################

    # URL: https://github.com/arq5x/bedtools2
    bedtools:
        path: 'bedtools'
        get_version: '--version'
        exit_code: 0

    # URL: http://bowtie-bio.sourceforge.net/bowtie2/index.shtml
    bowtie2:
        path: 'bowtie2'
        get_version: '--version'
        exit_code: 0

    # URL: http://cufflinks.cbcb.umd.edu/
    cufflinks:
        path: 'cufflinks'
        get_version: '--version'
        exit_code: 1

    # URL: https://github.com/marcelm/cutadapt
    cutadapt:
        path: 'cutadapt'
        get_version: '--version'
        exit_code: 0

    # URL: http://www.bioinformatics.babraham.ac.uk/projects/fastqc/
    fastqc:
        pre_command: ['echo', 'Enter']
        post_command: ['echo', 'Leave']
        path: 'fastqc'
        get_version: '--version'
        exit_code: 0

    # URL: https://github.com/taoliu/MACS/
    # Installation via 'pip install MACS2'
    macs2:
        path: 'macs2'
        get_version: '--version'
        exit_code: 0

    # URL: http://broadinstitute.github.io/picard/
#    MarkDuplicates:
#        path: 'MarkDuplicates'
#        get_version: '--version'
#        exit_code: 1

    # URL: http://zlib.net/pigz/
    pigz: 
        path: 'pigz'
        get_version: '--version'
        exit_code: 0

    # URL: http://smithlabresearch.org/software/preseq/
    preseq:
        path: 'preseq'
        get_version: ''
        exit_code: 0
    
    # URL: http://www.htslib.org/
    samtools:
        path: 'samtools'
        get_version: '--version'
        exit_code: 0

    # URL: http://www.bioinf.uni-leipzig.de/Software/segemehl/
    segemehl:
        path: 'segemehl.x'
        get_version: ''
        exit_code: 255

    # URL: http://ccb.jhu.edu/software/tophat/index.shtml
    tophat2:
        path: 'tophat2'
        get_version: '--version'
        exit_code: 0

#    bedGraphToBigWig:
#        path: '/data/bioinf/tools/UCSC-tools/bedGraphToBigWig'
#        get_version: ''
#        exit_code: 255


    ##################
    # Internal Tools #
    ##################

    cat4m:
        path: './tools/cat4m'

    fix_cutadapt:
        path: './tools/fix_cutadapt.py'
        get_version: '--version'
        exit_code: 0

    fix_s2c:
        path: ['./python_env/bin/python', './tools/fix_s2c.py']
        exit_code: 1

    fix_qnames:
        path: ['./python_env/bin/python', './tools/fix_qnames.py']

    mate_pair_strand_switch:
        path: ['./python_env/bin/python', './tools/mate_pair_strand_switch.py']
        get_version: '--version' 
        exit_code: 0

    remove_reads_segemehl:
        path: ['./python_env/bin/python', './tools/remove_reads_segemehl.py']
        exit_code: 1

    s2c:
        path: ['./python_env/bin/python', 'tools/s2c.py']
        get_version: ''
        exit_code: 2

    ##############
    # Unix Tools #
    ##############

    echo:
        path: 'echo'
        get_version: ''
        exit_code: 0

    echo:
        path: 'echo'
        get_version: ''
        exit_code: 0

    head:
        path: 'head'
        get_version: '--version'

    sort:
        path: 'sort'
        get_version: '--version'
        exit_code: 0

    wc:
        path: 'wc'
        get_version: '--version'
