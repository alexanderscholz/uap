# This is the rnaseq-pipeline configuration file.
# 
destination_path: "/gpfs1/data/bioinf/projects/code/projects_misc/2014_T_Cell_ChIPseq/data/test/out"

constants:
    - &genome data/bioinf/Data/Indices/hg19/hg19.fa
    - &genome_index /data/bioinf/Data/Indices/hg19/hg19.fa.fai
    - &segemehl_genome_index /data/bioinf/Data/Indices/hg19/hg19.idx
    - &bowtie2_genome_index /data/bioinf/genomes/data/animalia/chordata/mammalia/rodentia/homo_sapiens/hg19/indices/hg19 


steps:
    fc1 (run_folder_source):
        path: /gpfs1/data/bioinf/projects/code/projects_misc/2014_T_Cell_ChIPseq/data/test/IlluminaRunFolder/
        paired_end: yes
    # Quality control of sequencing run

    fastqc:
        _depends: fc1

    # Remove adapter sequences from reads
    # Adapters are:
    # R1 sequence of the TruSeq/ScriptSeq index adapter
    # R2 reverse complement sequence of the TruSeq/ScriptSeq universal adapter 
    cutadapt:
        _depends: fc1
        # adapter-R1: CAAGCAGAAGACGGCATACGAGAT
        # adapter-R2: AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGTAGATCTCGGTGGTCGCCGTATCATT
        adapter-type: 'g'
        ## Reading adapters from FASTA file introduced with v1.5
        adapter-file: './data/adapter_sequences/truseq_adapter_v1_v2_LT_ChIP_revcmp.fasta'
        fix_qnames: false

#    fix_cutadapt:
#        _depends: cutadapt

    ## Map reads onto genome ##
#    segemehl:
#        _depends: fix_cutadapt
#        genome: *genome
#        index: *segemehl_genome_index

#    tophat2:
#        _depends: fix_cutadapt
#        library_type: 'fr-unstranded'
#        index: *bowtie2_genome_index

#    s2c:
#        _depends: segemehl

#    fix_s2c:
#        _depends: s2c

#    sam_to_bam:
#        _depends: fix_s2c
#        sort_by_name: no
#        genome: *genome

#    remove_duplicate_reads:
#        # depending on sam_to_bam saves us a sort step
#        _depends: sam_to_bam

tools:
    bedtools:
        path: 'bedtools'
        get_version: '--version'
        exit_code: 0

#    bedGraphToBigWig:
#        path: '/data/bioinf/tools/UCSC-tools/bedGraphToBigWig'
#        get_version: ''
#        exit_code: 255

    bowtie2:
        path: 'bowtie2'
        get_version: '--version'
        exit_code: 0

    cat4m:
        path: './tools/cat4m'

    cutadapt:
        path: 'cutadapt'
        get_version: '--version'
        exit_code: 0

    fastqc:
        path: 'fastqc'
        get_version: '--version'
        exit_code: 0

    fix_cutadapt:
        path: './tools/fix_cutadapt.py'
        get_version: '--version'
        exit_code: 0

    fix_s2c:
        path: ['./python_env/bin/python', './tools/fix_s2c.py']
        exit_code: 1

    fix_qnames:
        path: ['./python_env/bin/python', './tools/fix_qnames.py']

    head:
        path: 'head'
        get_version: '--version'

    macs2:
        path: 'macs2'
        get_version: '--version'
        exit_code: 0

    MarkDuplicates:
        path: 'MarkDuplicates'
        get_version: '--version'
        exit_code: 1

    mate_pair_strand_switch:
        path: ['./python_env/bin/python', './tools/mate_pair_strand_switch.py']
        get_version: '--version' 
        exit_code: 0

    pigz:
        path: 'pigz'
        get_version: '--version'
        exit_code: 0

    remove_reads_segemehl:
        path: ['./python_env/bin/python', './tools/remove_reads_segemehl.py']
        exit_code: 1

    s2c:
        path: ['./python_env/bin/python', 'tools/s2c.py']
        get_version: ''
        exit_code: 2

    samtools:
        path: 'samtools'
        get_version: ''
        exit_code: 1

    segemehl:
        path: 'segemehl.x'
        get_version: ''
        exit_code: 255

    sort:
        path: 'sort'
        get_version: '--version'
        exit_code: 0

    tophat2:
        path: 'tophat2'
        get_version: '--version'
        exit_code: 0