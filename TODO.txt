========================
TODOs für die uap v0.0.2
========================

01.03.2018 - List of steps/tools needed for example workflows
----

The following steps occur in the example workflows

**source steps**

- raw_url_source
- fetch_chrom_sizes_source
- fastq_source

**processing steps**

- merge_fasta_files
- bowtie2_generate_index
- segemehl_generate_index
- bwa_generate_index
- samtools_faidx
- fetch_chrom_sizes_source
- merge_fastq_files
- fastqc
- fastx_quality_stats
- cutadapt
- fix_cutadapt
- bowtie2
- bwa_backtrack
- segemehl (commented, why? - because of required ram of ~60GB)
- tophat2
- sam_to_sorted_bam
- preseq_complexity_curve
- picard_markduplicates
- macs2
- htseq_count
- cufflinks

**internal tools**
compare_secure_hashes
fix_cutadapt
fix_s2c (not used but mentioned in Barski, in the other it is used)
fix_qnames
mate_pair_strand_switch
s2c (not used but mentioned in Barski, used in 2014..)

Zombie-Prozesse? (Don't do)
---------------------------

* uap scheint Prozesse zu erzeugen die weiterlaufen nachdem der Hauptprozesse
  getötet wurde. Warum werden die Kinderprozesse nicht gestoppt wenn der Eltern
  Prozess gestoppt wird?
* qdel von Jobs hinterlässt noch laufende Prozesse (produzierbar auch mit normalen Pipes)

Dokumentation (Alexander + Christoph + Sven)
--------------------------------------------

Es wäre super wenn wir eine FAQ Seite für die häufigsten
Fehlermeldungen haben würden (für Alexander aber auch alle anderen).
Die Doku des fastq_source Steps sollte ein Beispiel für ein YAML
dictionary enthalten.
Generell muss die Doku auf fehlenden Inhalt Kontroll gelesen werden.
--even-if-dirty Zweck beschreiben 

Docker (Alexander/Christoph) (Geringste Prio)
---------------------------------------------

Docker Support einbauen mittels Dockerfiles. Sitze ich gerade dran (Christoph).

Pfadangaben für Dateien die aus uap geladen werden (Sven)
---------------------------------------------------------

absolute Pfadangaben für alle open() calls.
Dateien und Verzeichnisse werden in Abhängigkeit vom Ort, von dem die uap ausgeführt wird, geschrieben... absoluten Dateipfad erzeugen und benutzen?

Debugging (???)
---------------

Submit Script in Annotation Datei speichern. (Done)
Prosa Log nach STDERR mittels logger 
Evtl. Subcommand fürs zusammensuchen von Ausgabedaten des Runs.

Weitere Ideen
-------------

* Verteilen von uap über PyPI (Python Package Repos)


Mailinglist/GitHub Issue Tracker
--------------------------------

* Vorbereiten das wir für Fehlermeldungen erreichbar sind

Documentation
=============

* FAQ für häufig Fehler
* Problem: steps.rst wird dynamisch durch stepdoc.py erzeugt
* Lösung: conf.py erweitern mit stepdoc.py damit die Doku automatisch aktualisiert wird?
** funktioniert nicht. immer manuell ausführen?
** nicht alle Inhalte sind dann perfekt formatiert, manuelle Bearbeitungen gehen nach dem neu erzeugen verloren
* Verwendung von AbstractStep::runs() beschreiben in Doku anstatt von self.declare_run() und execute()
** http://uap.readthedocs.io/en/latest/extension.html
* Bemerkung zur scheinbar sporadischen Verwendung von fifos, dd usw? Tool abhängige Nutzung von FIFOs
* narrowpeak_to_bed fehlt als Datei in Repository (ist noch bei mit lokal)

Examples
--------

* abändern der Beispiele für neue Version
* zwei Klassen von Beispielen (mit ungefährer CPU-/Speicher-/Dauer-Abschätzung)
** kleine (weniger rechenintensive) Beispiele
** richtige (rechenintensive/speicherhungrige) Beispiele 

Logging
=======

* Fehlermeldungen kürzen
** "Pipeline crashed"
* Stacktrace nur anzeigen wenn log-level auf z.B. debug

Fehler
======

Fehler mit .yaml-out dokumentieren

Steps
=====

* hg19 download reparieren (index_homo_sapiens) einen Download Step erstellen
  für mehrere Dateien/Runs
* add_option(dd-blocksize) wo nötig
** dd blocksize default-mäßig auf Linux default 256k -> als add_option in jeden Schritt der dd nutzt

Umbenennungen/Aufräumen
-----------------------

* tools/ Verzeichnis aufräumen. Welche Dateien von dort werden noch benötigt?
* Verzeichnis "old_steps" unter include/steps: Löschen? Merken des commits im Wiki und dann löschen

Git Repository
==============

Organisieren eines git Repositories für uap (Jörg/Jana)


Problems:
- if different sources contain identically named samples they are probably gone
  overwrite there output files handled wrong
